# Technology Stack Details

## Core Technologies

**Frontend Stack:**
- **Framework:** Next.js 15.x (App Router, React Server Components)
- **Language:** TypeScript 5.x (strict mode enabled)
- **Styling:** Tailwind CSS 3.x + shadcn/ui components
- **HTTP Client:** Built-in `fetch` with Next.js extensions
- **WebSocket:** Native browser WebSocket API
- **Form Handling:** React Hook Form + Zod validation
- **State:** React Context for global state, Server Components for data fetching
- **Icons:** lucide-react
- **Date/Time:** date-fns
- **Build Tool:** Turbopack (default in Next.js 15)

**Backend Stack:**
- **Framework:** FastAPI 0.115+ (ASGI)
- **Language:** Python 3.11+
- **Server:** Uvicorn (included with fastapi[standard])
- **Database:** SQLite 3.x (file-based: `backend/data/app.db`)
- **ORM:** SQLAlchemy 2.0+ (async engine)
- **Migrations:** Alembic
- **Camera/CV:** opencv-python 4.8+
- **AI SDKs:** openai, google-generativeai, anthropic
- **Auth:** python-jose (JWT), passlib (bcrypt)
- **Encryption:** cryptography (Fernet)
- **HTTP Client:** httpx (async)
- **WebSocket:** Built into FastAPI/Starlette

**Development Tools:**
- **Linting:** ESLint (frontend), Ruff (backend)
- **Formatting:** Prettier (frontend), Black (backend)
- **Testing:** Jest + React Testing Library (frontend), pytest (backend)
- **API Docs:** Auto-generated by FastAPI (Swagger UI + ReDoc)

## Integration Points

**Frontend ↔ Backend:**
- **REST API:** HTTP calls to `http://localhost:8000/api/v1/*`
- **WebSocket:** Persistent connection to `ws://localhost:8000/ws`
- **CORS:** Backend configured to allow frontend origin
- **Proxy:** Next.js API routes can proxy to backend (optional, for production)

**Backend ↔ Camera:**
- **Protocol:** RTSP for IP cameras, DirectShow/V4L2 for USB
- **Library:** OpenCV VideoCapture
- **Threading:** Separate thread per camera for frame capture
- **Frame Rate:** Configurable (default 5 FPS) to balance performance

**Backend ↔ AI Services:**
- **Protocol:** HTTPS REST APIs
- **Models:** OpenAI, Google Gemini, Anthropic Claude
- **Fallback:** Automatic retry with next provider if primary fails
- **Rate Limiting:** Respect free-tier limits, queue if necessary

**Backend ↔ Database:**
- **Connection:** SQLAlchemy async engine
- **Pooling:** Default SQLite connection pool
- **Transactions:** Automatic per-request transaction handling
- **Migrations:** Alembic for schema versioning

**Backend ↔ Webhook Targets:**
- **Protocol:** HTTPS POST (HTTP allowed but warned)
- **Retry:** 3 attempts with exponential backoff (1s, 2s, 4s)
- **Timeout:** 5 seconds per attempt
- **Headers:** Custom headers supported for auth

---
